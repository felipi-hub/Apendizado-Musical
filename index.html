<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MusiLearn - Aprendizado de Violino e Viola</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        secondary: '#8B5CF6',
                        accent: '#F59E0B'
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .card-hover {
            transition: all 0.3s ease;
        }

        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .progress-bar {
            transition: width 0.5s ease;
        }

        .note {
            animation: bounce 2s infinite;
        }

        @keyframes bounce {

            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateY(0);
            }

            40% {
                transform: translateY(-10px);
            }

            60% {
                transform: translateY(-5px);
            }
        }
    </style>
</head>

<body class="bg-gray-50 dark:bg-gray-900 min-h-screen">
    <!-- Dark mode detection -->
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>

    <div class="container mx-auto px-4 py-6 max-w-6xl">
        <!-- Header -->
        <header class="text-center mb-8">
            <div class="gradient-bg rounded-2xl p-8 text-white">
                <h1 class="text-4xl font-bold mb-2">üéµ MusiLearn</h1>
                <p class="text-xl opacity-90">Aprenda Violino e Viola de Arco de forma divertida!</p>
                <div class="flex justify-center space-x-4 mt-4">
                    <span class="note text-2xl">üéº</span>
                    <span class="note text-2xl" style="animation-delay: 0.5s">üéµ</span>
                    <span class="note text-2xl" style="animation-delay: 1s">üé∂</span>
                </div>
            </div>
        </header>

        <!-- Instrument Selection -->
        <div class="mb-8">
            <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-4 text-center">Escolha seu Instrumento</h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div class="instrument-card card-hover bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 cursor-pointer"
                    onclick="selectInstrument('violin')">
                    <div class="text-center">
                        <div class="text-6xl mb-4">üéª</div>
                        <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Violino</h3>
                        <p class="text-gray-600 dark:text-gray-300">Instrumento agudo e melodioso, perfeito para
                            come√ßar!</p>
                        <div class="mt-4 px-4 py-2 bg-primary text-white rounded-lg inline-block">Escolher Violino</div>
                    </div>
                </div>
                <div class="instrument-card card-hover bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 cursor-pointer"
                    onclick="selectInstrument('viola')">
                    <div class="text-center">
                        <div class="text-6xl mb-4">üéª</div>
                        <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Viola de Arco</h3>
                        <p class="text-gray-600 dark:text-gray-300">Som mais grave e encorpado, ideal para harmonia!</p>
                        <div class="mt-4 px-4 py-2 bg-secondary text-white rounded-lg inline-block">Escolher Viola</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Learning Dashboard -->
        <div id="learningDashboard" class="hidden">
            <!-- Progress Section -->
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 mb-8 border border-gray-200 dark:border-gray-700">
                <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-4">Seu Progresso</h3>
                <div class="flex items-center justify-between mb-2">
                    <span class="text-sm text-gray-600 dark:text-gray-300">N√≠vel Iniciante</span>
                    <span class="text-sm text-gray-600 dark:text-gray-300" id="progressText">0% completo</span>
                </div>
                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3">
                    <div class="progress-bar bg-gradient-to-r from-primary to-secondary h-3 rounded-full"
                        id="progressBar" style="width: 0%"></div>
                </div>
                <div class="mt-4 grid grid-cols-3 gap-4 text-center">
                    <div>
                        <div class="text-2xl font-bold text-primary" id="lessonsCompleted">0</div>
                        <div class="text-sm text-gray-600 dark:text-gray-300">Li√ß√µes</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-secondary" id="songsLearned">0</div>
                        <div class="text-sm text-gray-600 dark:text-gray-300">M√∫sicas</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-accent" id="streakDays">0</div>
                        <div class="text-sm text-gray-600 dark:text-gray-300">Dias</div>
                    </div>
                </div>
            </div>

            <!-- Lessons Grid -->
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                <!-- Lesson Cards -->
                <div class="lesson-card card-hover bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"
                    onclick="openLesson('basics')">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white">Fundamentos</h4>
                        <span class="text-2xl">üìö</span>
                    </div>
                    <p class="text-gray-600 dark:text-gray-300 mb-4">Postura, como segurar o instrumento e o arco</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-primary font-semibold">Li√ß√£o 1</span>
                        <button
                            class="px-4 py-2 bg-primary text-white rounded-lg text-sm hover:bg-primary/90">Come√ßar</button>
                    </div>
                </div>

                <div class="lesson-card card-hover bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"
                    onclick="openLesson('notes')">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white">Primeiras Notas</h4>
                        <span class="text-2xl">üéµ</span>
                    </div>
                    <p class="text-gray-600 dark:text-gray-300 mb-4">Aprenda as notas b√°sicas: Sol, R√©, L√°, Mi</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-secondary font-semibold">Li√ß√£o 2</span>
                        <button class="px-4 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm"
                            disabled>Bloqueado</button>
                    </div>
                </div>

                <div class="lesson-card card-hover bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"
                    onclick="openLesson('rhythm')">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white">Ritmo B√°sico</h4>
                        <span class="text-2xl">ü•Å</span>
                    </div>
                    <p class="text-gray-600 dark:text-gray-300 mb-4">Sem√≠nimas, m√≠nimas e pausas</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-accent font-semibold">Li√ß√£o 3</span>
                        <button class="px-4 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm"
                            disabled>Bloqueado</button>
                    </div>
                </div>

                <div class="lesson-card card-hover bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"
                    onclick="openLesson('songs')">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white">Primeiras M√∫sicas</h4>
                        <span class="text-2xl">üé∂</span>
                    </div>
                    <p class="text-gray-600 dark:text-gray-300 mb-4">M√∫sicas simples para praticar</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-primary font-semibold">Li√ß√£o 4</span>
                        <button class="px-4 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm"
                            disabled>Bloqueado</button>
                    </div>
                </div>

                <div class="lesson-card card-hover bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"
                    onclick="openLesson('memory')">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white">Exerc√≠cios de Mem√≥ria</h4>
                        <span class="text-2xl">üß†</span>
                    </div>
                    <p class="text-gray-600 dark:text-gray-300 mb-4">T√©cnicas para memorizar m√∫sicas</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-secondary font-semibold">Li√ß√£o 5</span>
                        <button class="px-4 py-2 bg-gray-300 text-gray-600 rounded-lg text-sm"
                            disabled>Bloqueado</button>
                    </div>
                </div>

                <div class="lesson-card card-hover bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"
                    onclick="openVideoLibrary()">
                    <div class="flex items-center justify-between mb-4">
                        <h4 class="text-lg font-bold text-gray-800 dark:text-white">Biblioteca de V√≠deos</h4>
                        <span class="text-2xl">üìπ</span>
                    </div>
                    <p class="text-gray-600 dark:text-gray-300 mb-4">V√≠deos educativos e demonstra√ß√µes</p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-accent font-semibold">Sempre Dispon√≠vel</span>
                        <button
                            class="px-4 py-2 bg-accent text-white rounded-lg text-sm hover:bg-accent/90">Assistir</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lesson Modal -->
        <div id="lessonModal"
            class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-800 dark:text-white" id="lessonTitle">Li√ß√£o</h3>
                    <button onclick="closeLessonModal()"
                        class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div id="lessonContent" class="space-y-4">
                    <!-- Lesson content will be loaded here -->
                </div>
                <div class="mt-6 flex justify-between">
                    <button onclick="requestVideoHelp()"
                        class="px-6 py-2 bg-accent text-white rounded-lg hover:bg-accent/90">
                        üìπ Solicitar V√≠deo
                    </button>
                    <button onclick="completeLessonAndClose()"
                        class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90">
                        Concluir Li√ß√£o
                    </button>
                </div>
            </div>
        </div>

        <!-- Video Request Modal -->
        <div id="videoModal"
            class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
            <div class="bg-white dark:bg-gray-800 rounded-xl p-6 max-w-xl w-full">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-800 dark:text-white">Solicitar V√≠deo Educativo</h3>
                    <button onclick="closeVideoModal()"
                        class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">T√≥pico do
                            v√≠deo:</label>
                        <input type="text" id="videoTopic"
                            class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-base bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
                            placeholder="Ex: Como segurar o arco corretamente">
                    </div>
                    <div>
                        <label
                            class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Instrumento:</label>
                        <select id="videoInstrument"
                            class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-base bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                            <option value="violino">Violino</option>
                            <option value="viola">Viola de Arco</option>
                        </select>
                    </div>
                    <div id="videoResult" class="hidden bg-gray-50 dark:bg-gray-700 p-4 rounded-lg">
                        <div class="flex items-center space-x-2 mb-2">
                            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-primary"></div>
                            <span class="text-sm text-gray-600 dark:text-gray-300">Buscando v√≠deo...</span>
                        </div>
                        <div id="videoContent" class="text-gray-800 dark:text-white"></div>
                    </div>
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button onclick="closeVideoModal()"
                        class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg">Cancelar</button>
                    <button onclick="searchVideo()"
                        class="px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary/90">Buscar V√≠deo</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        let selectedInstrument = '';
        let currentProgress = 0;
        let completedLessons = 0;

        // Poe API handlers
        window.Poe?.registerHandler?.('video-search', (result, context) => {
            const videoContent = document.getElementById('videoContent');
            const msg = result.responses[0];

            if (msg.status === "error") {
                videoContent.innerHTML = '<div class="text-red-500">Erro ao buscar v√≠deo: ' + msg.statusText + '</div>';
            } else if (msg.status === "incomplete") {
                videoContent.innerHTML = msg.content || '<div class="animate-pulse">Buscando...</div>';
            } else if (msg.status === "complete") {
                videoContent.innerHTML = formatVideoResponse(msg.content);
            }
        });

        function formatVideoResponse(content) {
            // Format the response with better styling
            return `<div class="prose dark:prose-invert max-w-none">${content.replace(/\n/g, '<br>')}</div>`;
        }

        function selectInstrument(instrument) {
            selectedInstrument = instrument;
            document.getElementById('learningDashboard').classList.remove('hidden');

            // Update instrument-specific content
            const instrumentName = instrument === 'violin' ? 'Violino' : 'Viola de Arco';
            document.querySelector('.gradient-bg p').textContent = `Aprendendo ${instrumentName} - Vamos come√ßar!`;

            // Scroll to dashboard
            document.getElementById('learningDashboard').scrollIntoView({ behavior: 'smooth' });
        }

        function openLesson(lessonType) {
            if (lessonType !== 'basics' && completedLessons === 0) {
                showCustomAlert('Complete a li√ß√£o anterior primeiro!');
                return;
            }

            const modal = document.getElementById('lessonModal');
            const title = document.getElementById('lessonTitle');
            const content = document.getElementById('lessonContent');

            const lessons = {
                basics: {
                    title: 'Fundamentos do ' + (selectedInstrument === 'violin' ? 'Violino' : 'Viola de Arco'),
                    content: `
                        <div class="space-y-6">
                            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                                <h4 class="font-bold text-blue-800 dark:text-blue-200 mb-2">Postura Correta</h4>
                                <ul class="list-disc pl-5 space-y-1 text-gray-700 dark:text-gray-300">
                                    <li>Mantenha as costas retas</li>
                                    <li>Relaxe os ombros</li>
                                    <li>P√©s firmes no ch√£o</li>
                                </ul>
                            </div>
                            <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg">
                                <h4 class="font-bold text-green-800 dark:text-green-200 mb-2">Como Segurar o Instrumento</h4>
                                <ul class="list-disc pl-5 space-y-1 text-gray-700 dark:text-gray-300">
                                    <li>Apoie na clav√≠cula esquerda</li>
                                    <li>Segure com o queixo suavemente</li>
                                    <li>M√£o esquerda no bra√ßo do instrumento</li>
                                </ul>
                            </div>
                            <div class="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg">
                                <h4 class="font-bold text-purple-800 dark:text-purple-200 mb-2">Segurando o Arco</h4>
                                <ul class="list-disc pl-5 space-y-1 text-gray-700 dark:text-gray-300">
                                    <li>Polegar curvado no tal√£o</li>
                                    <li>Dedos relaxados</li>
                                    <li>Pulso flex√≠vel</li>
                                </ul>
                            </div>
                        </div>
                    `
                },
                notes: {
                    title: 'Primeiras Notas',
                    content: `
                        <div class="space-y-6">
                            <div class="text-center">
                                <h4 class="text-lg font-bold mb-4">Notas das Cordas Soltas</h4>
                                <div class="grid grid-cols-2 gap-4">
                                    <div class="bg-blue-100 dark:bg-blue-900/30 p-4 rounded-lg">
                                        <div class="text-2xl font-bold text-blue-600">G</div>
                                        <div class="text-sm">Sol - 4¬™ corda</div>
                                    </div>
                                    <div class="bg-green-100 dark:bg-green-900/30 p-4 rounded-lg">
                                        <div class="text-2xl font-bold text-green-600">D</div>
                                        <div class="text-sm">R√© - 3¬™ corda</div>
                                    </div>
                                    <div class="bg-yellow-100 dark:bg-yellow-900/30 p-4 rounded-lg">
                                        <div class="text-2xl font-bold text-yellow-600">A</div>
                                        <div class="text-sm">L√° - 2¬™ corda</div>
                                    </div>
                                    <div class="bg-red-100 dark:bg-red-900/30 p-4 rounded-lg">
                                        <div class="text-2xl font-bold text-red-600">E</div>
                                        <div class="text-sm">Mi - 1¬™ corda</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                },
                rhythm: {
                    title: 'Ritmo B√°sico - Batidas e Pausas üéµü•Å',
                    content: `
        <div class="space-y-6">            
            <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg">
                <h4 class="font-bold text-green-800 dark:text-green-200 mb-2">üéµ Semibreve</h4>
                <p class="text-gray-700 dark:text-gray-300">
                    A <strong>semibreve</strong> vale <strong>4 tempos</strong>. √â uma nota longa que preenche um compasso inteiro.
                    Conte assim: <em>1... 2... 3... 4...</em> mantendo o som cont√≠nuo.
                </p>
            </div>
            <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg">
                <h4 class="font-bold text-yellow-800 dark:text-yellow-200 mb-2">üé∂ Sem√≠nimas</h4>
                <p class="text-gray-700 dark:text-gray-300">Cada batida vale <strong>1 tempo</strong>. Imagine um passo de dan√ßa simples: 1, 2, 3, 4...</p>
            </div>
            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                <h4 class="font-bold text-blue-800 dark:text-blue-200 mb-2">üïê M√≠nimas</h4>
                <p class="text-gray-700 dark:text-gray-300">Valem <strong>2 tempos</strong>. S√£o notas mais longas: ‚ÄúTum... (espera) Tum...‚Äù</p>
            </div>
            <div class="bg-red-50 dark:bg-red-900/20 p-4 rounded-lg">
                <h4 class="font-bold text-red-800 dark:text-red-200 mb-2">ü§´ Pausas</h4>
                <p class="text-gray-700 dark:text-gray-300">Sil√™ncio tamb√©m √© ritmo! Aprenda a contar mesmo quando n√£o se toca nada.</p>
            </div>
            <div class="text-center mt-4">
                <button onclick="playClapPattern()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition">üëÇ Ouvir Batida</button>
            </div>
        </div>
    `
                }
            };

            const lesson = lessons[lessonType];
            title.textContent = lesson.title;
            content.innerHTML = lesson.content;
            modal.classList.remove('hidden');
        }

        function openVideoLibrary() {
            openVideoModal();
        }

        function openVideoModal() {
            document.getElementById('videoModal').classList.remove('hidden');
            document.getElementById('videoInstrument').value = selectedInstrument === 'violin' ? 'violino' : 'viola';
        }

        function closeVideoModal() {
            document.getElementById('videoModal').classList.add('hidden');
            document.getElementById('videoResult').classList.add('hidden');
            document.getElementById('videoTopic').value = '';
            document.getElementById('videoContent').innerHTML = '';
        }

        function closeLessonModal() {
            document.getElementById('lessonModal').classList.add('hidden');
        }
        function playClapPattern() {
            const pattern = ['üëè', 'üëè', 'üõë', 'üëè'];
            let i = 0;

            const audio = new Audio('https://www.soundjay.com/human/applause-01.mp3');

            const interval = setInterval(() => {
                const emoji = pattern[i];
                showCustomAlert(`Batida: ${emoji}`);

                if (emoji === 'üëè') {
                    audio.currentTime = 0;
                    audio.play();
                }

                i++;
                if (i >= pattern.length) clearInterval(interval);
            }, 4000);
        }



        async function searchVideo() {
            const topic = document.getElementById('videoTopic').value.trim();
            const instrument = document.getElementById('videoInstrument').value;

            if (!topic) {
                showCustomAlert('Por favor, digite um t√≥pico para o v√≠deo.');
                return;
            }

            document.getElementById('videoResult').classList.remove('hidden');
            document.getElementById('videoContent').innerHTML = '<div class="animate-pulse">Buscando v√≠deo...</div>';

            try {
                await window.Poe.sendUserMessage(
                    `@Claude-Sonnet-4 Encontre e descreva um v√≠deo educativo sobre "${topic}" para aprender ${instrument}. Inclua o t√≠tulo do v√≠deo, uma breve descri√ß√£o do conte√∫do, e dicas importantes mostradas no v√≠deo. Se poss√≠vel, sugira termos de busca no YouTube.`,
                    {
                        handler: 'video-search',
                        stream: true,
                        openChat: false
                    }
                );
            } catch (err) {
                document.getElementById('videoContent').innerHTML = '<div class="text-red-500">Erro ao buscar v√≠deo: ' + err.message + '</div>';
            }
        }

        function requestVideoHelp() {
            closeLesson();
            openVideoModal();

            // Pre-fill with lesson-specific topic
            const currentLesson = document.getElementById('lessonTitle').textContent;
            document.getElementById('videoTopic').value = currentLesson;
        }

        function completeLessonAndClose() {
            completedLessons++;
            currentProgress = Math.min((completedLessons / 5) * 100, 100);

            updateProgress();
            closeLessonModal();

            // Unlock next lesson
            const lessonCards = document.querySelectorAll('.lesson-card');
            if (completedLessons < lessonCards.length) {
                const nextButton = lessonCards[completedLessons].querySelector('button');
                nextButton.disabled = false;
                nextButton.className = 'px-4 py-2 bg-primary text-white rounded-lg text-sm hover:bg-primary/90';
                nextButton.textContent = 'Come√ßar';
            }

            showCustomAlert('üéâ Parab√©ns! Li√ß√£o conclu√≠da com sucesso!');
        }

        function updateProgress() {
            document.getElementById('progressBar').style.width = currentProgress + '%';
            document.getElementById('progressText').textContent = Math.round(currentProgress) + '% completo';
            document.getElementById('lessonsCompleted').textContent = completedLessons;
            document.getElementById('songsLearned').textContent = Math.floor(completedLessons / 2);
            document.getElementById('streakDays').textContent = completedLessons;
        }

        function showCustomAlert(message) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-sm w-full mx-4">
                    <p class="text-gray-700 dark:text-gray-300 mb-4 text-center">${message}</p>
                    <div class="flex justify-center">
                        <button class="px-6 py-2 bg-primary text-white hover:bg-primary/90 rounded-lg" onclick="this.closest('.fixed').remove()">OK</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            setTimeout(() => modal.remove(), 3000);
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function () {
            updateProgress();
        });
    </script>
</body>

</html>